<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>报修反馈管理</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <script>
    tailwind.config = { theme: { extend: { 
      colors: {
        primary: '#3B82F6',
        success: '#10B981',
        warning: '#F59E0B',
        danger: '#EF4444'
      }
    }}}
  </script>
</head>

<body class="bg-gray-50 min-h-screen">
  <!-- 顶部导航 -->
  <header class="bg-white shadow-sm sticky top-0 z-10">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
      <div class="flex items-center gap-2">
        <i class="fa fa-building text-primary text-xl"></i>
        <h1 class="text-lg font-bold text-primary">学生反馈管理</h1>
      </div>
    </div>
  </header>
  
  <!-- 主内容 -->
  <main class="container mx-auto px-4 py-5">
    <!-- 仅保留搜索框 -->
    <div class="bg-white rounded-lg shadow-sm p-4 mb-5">
      <div class="relative">
        <i class="fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"></i>
        <input type="text" placeholder="搜索报修编号/宿舍号/学生姓名" 
               class="w-full pl-10 pr-3 py-1.5 text-sm border border-gray-200 rounded focus:outline-none focus:border-primary">
      </div>
    </div>

    <!-- 反馈列表 -->
    <div class="bg-white rounded-lg shadow-sm overflow-hidden mb-5">
      <div class="overflow-x-auto">
        <table class="min-w-full text-sm">
          <thead>
            <tr class="bg-gray-50 text-xs text-gray-500">
              <th class="px-4 py-3 text-left">报修编号</th>
              <th class="px-4 py-3 text-left">宿舍号</th>
              <th class="px-4 py-3 text-left">学生姓名</th>
              <th class="px-4 py-3 text-left">问题类型</th>
              <th class="px-4 py-3 text-left">完成时间</th>
              <th class="px-4 py-3 text-left">状态</th>
              <th class="px-4 py-3 text-left">操作</th>
            </tr>
          </thead>
          <tbody>
            <tr class="border-t border-gray-100 hover:bg-gray-50">
              <td class="px-4 py-3">RX20230615</td>
              <td class="px-4 py-3">3号楼-402</td>
              <td class="px-4 py-3">张三</td>
              <td class="px-4 py-3">水电维修</td>
              <td class="px-4 py-3">2023-06-15 14:20</td>
              <td class="px-4 py-3">
                <span class="px-1.5 py-0.5 rounded text-xs bg-green-100 text-green-800">已完成-已评价</span>
              </td>
              <td class="px-4 py-3">
                <button class="text-primary text-xs hover:text-primary/80" onclick="showFeedbackDetail('RX20230615')">查看详情</button>
              </td>
            </tr>
            <tr class="border-t border-gray-100 hover:bg-gray-50">
              <td class="px-4 py-3">RX20230614</td>
              <td class="px-4 py-3">1号楼-205</td>
              <td class="px-4 py-3">李四</td>
              <td class="px-4 py-3">家具维修</td>
              <td class="px-4 py-3">2023-06-14 16:45</td>
              <td class="px-4 py-3">
                <span class="px-1.5 py-0.5 rounded text-xs bg-blue-100 text-blue-800">已完成-未评价</span>
              </td>
              <td class="px-4 py-3">
                <button class="text-primary text-xs hover:text-primary/80" onclick="showFeedbackDetail('RX20230614')">查看详情</button>
              </td>
            </tr>
            <tr class="border-t border-gray-100 hover:bg-gray-50">
              <td class="px-4 py-3">RX20230613</td>
              <td class="px-4 py-3">2号楼-501</td>
              <td class="px-4 py-3">王五</td>
              <td class="px-4 py-3">电器维修</td>
              <td class="px-4 py-3">2023-06-13 10:20</td>
              <td class="px-4 py-3">
                <!-- 修改为已完成-未评价状态 -->
                <span class="px-1.5 py-0.5 rounded text-xs bg-blue-100 text-blue-800">已完成-未评价</span>
              </td>
              <td class="px-4 py-3">
                <button class="text-primary text-xs hover:text-primary/80" onclick="showFeedbackDetail('RX20230613')">查看详情</button>
              </td>
            </tr>
            <tr class="border-t border-gray-100 hover:bg-gray-50">
              <td class="px-4 py-3">RX20230612</td>
              <td class="px-4 py-3">4号楼-308</td>
              <td class="px-4 py-3">赵六</td>
              <td class="px-4 py-3">网络问题</td>
              <td class="px-4 py-3">2023-06-12 14:15</td>
              <td class="px-4 py-3">
                <span class="px-1.5 py-0.5 rounded text-xs bg-green-100 text-green-800">已完成-已评价</span>
              </td>
              <td class="px-4 py-3">
                <button class="text-primary text-xs hover:text-primary/80" onclick="showFeedbackDetail('RX20230612')">查看详情</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <!-- 分页 -->
      <div class="px-4 py-3 flex justify-between items-center border-t border-gray-100">
        <div class="text-sm text-gray-500">
          显示 1 到 4 条，共 24 条
        </div>
        <div class="flex gap-1">
          <button class="w-8 h-8 flex items-center justify-center rounded border border-gray-200 text-gray-400 hover:border-primary hover:text-primary">
            <i class="fa fa-chevron-left text-xs"></i>
          </button>
          <button class="w-8 h-8 flex items-center justify-center rounded bg-primary text-white">1</button>
          <button class="w-8 h-8 flex items-center justify-center rounded border border-gray-200 hover:border-primary hover:text-primary">2</button>
          <button class="w-8 h-8 flex items-center justify-center rounded border border-gray-200 hover:border-primary hover:text-primary">3</button>
          <button class="w-8 h-8 flex items-center justify-center rounded border border-gray-200 hover:border-primary hover:text-primary">
            <i class="fa fa-chevron-right text-xs"></i>
          </button>
        </div>
      </div>
    </div>
  </main>

  <!-- 反馈详情弹窗 -->
  <div id="feedbackDetailModal" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-20">
    <div class="bg-white rounded-lg p-5 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
      <div class="flex justify-between items-center mb-4">
        <h3 class="font-bold text-base">报修反馈详情 #<span id="modalRepairId">RX20230615</span></h3>
        <button id="closeDetailModal" class="text-gray-400 hover:text-gray-600">
          <i class="fa fa-times"></i>
        </button>
      </div>
      
      <div class="border-b border-gray-100 pb-4 mb-4">
        <h4 class="text-xs font-medium text-gray-500 mb-3">报修基本信息</h4>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
          <div>
            <p class="text-gray-500 text-xs">宿舍号</p>
            <p>3号楼-402</p>
          </div>
          <div>
            <p class="text-gray-500 text-xs">学生姓名</p>
            <p>张三</p>
          </div>
          <div>
            <p class="text-gray-500 text-xs">联系电话</p>
            <p>138****5678</p>
          </div>
          <div>
            <p class="text-gray-500 text-xs">问题类型</p>
            <p>水电维修</p>
          </div>
          <div>
            <p class="text-gray-500 text-xs">提交时间</p>
            <p>2023-06-15 08:30</p>
          </div>
          <div>
            <p class="text-gray-500 text-xs">完成时间</p>
            <p>2023-06-15 14:20</p>
          </div>
        </div>
        
        <div class="mt-3">
          <p class="text-gray-500 text-xs mb-1">问题描述</p>
          <p class="text-sm p-2 bg-gray-50 rounded border border-gray-100">
            宿舍卫生间水龙头损坏，无法关闭，一直在漏水，已经影响正常使用，麻烦尽快处理。
          </p>
        </div>
      </div>
      
      <div class="border-b border-gray-100 pb-4 mb-4">
        <h4 class="text-xs font-medium text-gray-500 mb-3">处理信息</h4>
        <div class="mb-3">
          <p class="text-gray-500 text-xs mb-1">处理内容</p>
          <p class="text-sm p-2 bg-gray-50 rounded border border-gray-100">
            已更换新的水龙头，测试正常，不再漏水。
          </p>
        </div>
        <div>
          <p class="text-gray-500 text-xs mb-1">处理图片</p>
          <div class="flex flex-wrap gap-2">
            <img src="https://picsum.photos/id/1040/120/120" alt="处理后图片" class="w-20 h-20 object-cover rounded cursor-pointer" onclick="showImageModal(this.src)">
          </div>
        </div>
      </div>
      
      <div>
        <h4 class="text-xs font-medium text-gray-500 mb-3">学生反馈</h4>
        <div class="mb-3">
          <p class="text-gray-500 text-xs mb-1">评价内容</p>
          <p class="text-sm p-2 bg-gray-50 rounded border border-gray-100">
            维修很及时，师傅态度很好，问题解决得很彻底，非常满意！
          </p>
        </div>
        <div>
          <p class="text-gray-500 text-xs mb-1">教师回复</p>
          <textarea class="w-full text-sm border border-gray-200 rounded px-2 py-2" rows="2" placeholder="请输入回复内容..."></textarea>
          <button class="mt-2 text-xs bg-primary text-white px-3 py-1 rounded hover:bg-primary/90">提交回复</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 图片预览弹窗 -->
  <div id="imageModal" class="fixed inset-0 bg-black/80 flex items-center justify-center hidden z-50">
    <button id="closeImageModal" class="absolute top-4 right-4 text-white text-xl">
      <i class="fa fa-times"></i>
    </button>
    <img id="largeImage" src="" alt="图片预览" class="max-w-[90%] max-h-[90vh]">
  </div>

  <script>
    // 显示反馈详情
    function showFeedbackDetail(repairId) {
      document.getElementById('modalRepairId').textContent = repairId;
      document.getElementById('feedbackDetailModal').classList.remove('hidden');
    }
    
    // 显示图片预览
    function showImageModal(src) {
      document.getElementById('largeImage').src = src;
      document.getElementById('imageModal').classList.remove('hidden');
    }
    
    // 关闭弹窗事件
    document.getElementById('closeDetailModal').addEventListener('click', () => {
      document.getElementById('feedbackDetailModal').classList.add('hidden');
    });
    
    document.getElementById('closeImageModal').addEventListener('click', () => {
      document.getElementById('imageModal').classList.add('hidden');
    });
    
    // 点击弹窗背景关闭
    document.getElementById('feedbackDetailModal').addEventListener('click', (e) => {
      if (e.target === document.getElementById('feedbackDetailModal')) {
        document.getElementById('feedbackDetailModal').classList.add('hidden');
      }
    });
    
    document.getElementById('imageModal').addEventListener('click', (e) => {
      if (e.target === document.getElementById('imageModal')) {
        document.getElementById('imageModal').classList.add('hidden');
      }
    });
  </script>
</body>
</html>
